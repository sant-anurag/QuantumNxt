{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ATS Home</title>
    <link rel="stylesheet" href="{% static 'css/home.css' %}">
    <link rel="stylesheet" href="{% static 'css/notification_popup.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.0.4/dist/tailwind.min.css">

</head>
<body>
<div class="sidebar">
    <div class="sidebar-header">
        <h2 class="qnxt-aura">Welcome</h2>
        {% if name %}<span class="sidebar-emp-name">{{ name }}</span>{% endif %}
    </div>
    <ul class="menu">
        <li>
            <a href="{% url 'home' %}"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
        </li>
        <li>
            <a href="#"><i class="fas fa-users"></i> Teams</a>
            <ul class="submenu">
                <li><a href="{% url 'add_member' %}"><i class="fas fa-user-plus"></i> Add Member</a></li>
                <li><a href="{% url 'create_team' %}"><i class="fas fa-users-cog"></i> Create Team</a></li>
                <li><a href="{% url 'view_edit_teams' %}"><i class="fas fa-edit"></i> Manage Teams</a></li>
            </ul>
        </li>
        <li>
            <a href="#"><i class="fas fa-tasks"></i> Recruitment Tasks</a>
            <ul class="submenu">
                <li><a href="{% url 'jd_create' %}"><i class="fas fa-file-medical"></i> Create New JD</a></li>
                <li><a href="{% url 'view_edit_jds' %}"><i class="fas fa-list-alt"></i> View/Edit JDs</a></li>
                <li><a href="{% url 'assign_jd_page' %}"><i class="fas fa-user-tag"></i> Assign JDs</a></li>
                <li><a href="{% url 'employee_view_page' %}"><i class="fas fa-user-friends"></i> Employee View</a></li>
            </ul>
        </li>
        <li>
            <a href="#"><i class="fas fa-file-alt"></i> Manage resume</a>
            <ul class="submenu">
                <li><a href="{% url 'upload_resume_page' %}"><i class="fas fa-file-upload"></i> Upload Resume</a></li>
                <li><a href="{% url 'view_parse_resumes_page' %}?jd_id=1"><i class="fas fa-search"></i> View/Screen Resumes</a></li>
            </ul>
        </li>
        <li>
            <a href="#"><i class="fas fa-calendar-check"></i> Interview Workflow</a>
            <ul class="submenu">
                <li><a href="{% url 'schedule_interviews_page' %}"><i class="fas fa-calendar-plus"></i> Schedule Interviews</a></li>
                <li><a href="{% url 'manage_candidate_status' %}"><i class="fas fa-user-check"></i> Manage Candidate Status</a></li>
            </ul>
        </li>
        <li>
            <a href="#"><i class="fas fa-user-tie"></i> Candidates</a>
            <ul class="submenu">
                <li><a href="{% url 'view_finalized_candidates' %}"><i class="fas fa-check-circle"></i> View Finalized Candidates</a></li>
                <li><a href="{% url 'candidate_profile' %}"><i class="fas fa-id-card"></i> Candidate Profiles</a></li>
                <li><a href="{% url 'offer_letter' %}"><i class="fas fa-file-signature"></i> Offer Letter Management</a></li>
            </ul>
        </li>
        <li>
            <a href="#"><i class="fas fa-chart-bar"></i> Reports & Analytics</a>
            <ul class="submenu">
                <li><a href="{% url 'team_reports' %}"><i class="fas fa-users-cog"></i> Team-wise Reports</a></li>
                <li><a href="{% url 'task_progress_reports' %}"><i class="fas fa-tasks"></i> Task Progress Reports</a></li>
                <li><a href="{% url 'status_report' %}"><i class="fas fa-file-excel"></i> Status Report</a></li>
                <li><a href="{% url 'candidate_conversion_rates' %}"><i class="fas fa-chart-line"></i> Conversion Analytics</a></li>
            </ul>
        </li>
        <li>
            <a href="#"><i class="fas fa-cog"></i> Settings</a>
            <ul class="submenu">
                <li><a href="{% url 'user_profile' %}"><i class="fas fa-user"></i> User Profile</a></li>
               <li><a href="{% url 'notification_settings' %}"><i class="fas fa-bell"></i> Notification</a></li>
                <li><a href="{% url 'access_permissions' %}"><i class="fas fa-shield-alt"></i> Access & Permissions</a></li>
                <li><a href="{% url 'manage_sessions' %}"><i class="fas fa-user-lock"></i> Manage Sessions</a></li>
                <li><a href="{% url 'create_customer' %}"><i class="fas fa-building"></i> Create Customer</a></li>
            </ul>
        </li>
        <!-- add a logout menu item-->
        <li>
            <a href="{% url 'logout' %}"><i class="fas fa-sign-out-alt"></i> Logout</a>
        </li>

    </ul>
</div>
<!-- ats_tracker/templates/home.html -->
<div class="main-content">
    <div class="qnxt-header-gradient">
        <h1>QuantumNxt</h1>
    </div>
    <div class="qnxt-body">
        {% block content %}
        {% load static %}
        <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
        <div class="dashboard-container">

            <div class="dashboard-shortcuts">
                <button class="shortcut-btn" onclick="location.href='{% url 'add_member' %}'">
                    <i class="fas fa-user-plus"></i> Add Member
                </button>
                <button class="shortcut-btn" onclick="location.href='{% url 'create_team' %}'">
                    <i class="fas fa-users-cog"></i> Create Team
                </button>
                <button class="shortcut-btn" onclick="location.href='{% url 'jd_create' %}'">
                    <i class="fas fa-file-medical"></i> Create JD
                </button>
                <button class="shortcut-btn" onclick="location.href='{% url 'assign_jd_page' %}'">
                    <i class="fas fa-tasks"></i> Assign JD
                </button>
                <button class="shortcut-btn" onclick="location.href='{% url 'upload_resume_page' %}'">
                    <i class="fas fa-file-upload"></i> Upload Resume
                </button>
            </div>
            <div class="dashboard-sections">
                <div class="dashboard-left">
                    <div class="dashboard-card">
                        <h3>Pending/Active Recruitment JDs</h3>
                        <table class="dashboard-table" id="pending-jds-table">
                            <thead>
                            <tr>
                                <th>JD ID</th>
                                <th>Summary</th>
                                <th>Customer</th>
                                <th>Status</th>
                                <th>In-Progress Profiles</th>
                            </tr>
                            </thead>
                            <tbody>
                            <!-- Filled by JS -->
                            </tbody>
                        </table>
                    </div>
                    <div class="dashboard-card">
                        <h3>Monthly Closed JDs & Candidates</h3>
                        <table class="dashboard-table" id="monthly-report-table">
                            <thead>
                            <tr>
                                <th>Month</th>
                                <th>Closed JDs</th>
                                <th>Candidates</th>
                            </tr>
                            </thead>
                            <tbody>
                            <!-- Filled by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="dashboard-right">
                    <div class="dashboard-card">
                        <h3>Active JDs by Customer</h3>
                        <canvas id="customerPieChart"></canvas>
                    </div>
                    <div class="dashboard-card">
                        <h3>Closed JDs (Last 6 Months)</h3>
                        <canvas id="closedJDsBarChart"></canvas>
                    </div>
                </div>
            </div>
            <div>
                <div class="dashboard-card">
                    <h3>In Progress Candidates</h3>
                    <table class="dashboard-table" id="in-progress-candidates-table">
                        <thead>
                        <tr>
                            <th>Candidate ID</th>
                            <th>Name</th>
                            <th>JD ID</th>
                            <th>L1 Status</th>
                            <th>L2 Status</th>
                            <th>L3 Status</th>
                            <th>Customer</th>
                            <th>Assigned Team</th>
                        </tr>
                        </thead>
                        <tbody>
                        <!-- Filled by JS -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="{% static 'js/dashboard.js' %}"></script>
        {% endblock %}
    </div>
</div>

<!-- Notifications -->
 <div class="notifications-panel" id="notifications-panel">
    <h2>Notifications</h2>
    <ul id="notification-list" class="notifications-list">
        <!-- Notifications will be dynamically populated here -->
        <li class="notification-item" id="notification-1">
            <div class="notification-sender">System</div>
            <div class="notification-meta">
                <div class="notification-date">2023-10-01</div>
                <div class="notification-time">10:30 AM</div>
            </div>
            <div class="notification-content">
                <div class="notification-type">New Candidate Application</div>
                <div class="notification-text">This will be the notification text</div>
            </div>
            <button class="notification-cancel" id="cancel-notification-2"><i class="fas fa-times"></i></button>
        </li>
    </ul>
 </div>


<script src="{% static 'js/notifications.js' %}"></script>
<script src="{% static 'js/home.js' %}"></script>
</body>
</html>