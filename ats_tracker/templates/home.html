{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ATS Home</title>
    <link rel="stylesheet" href="{% static 'css/home.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>
    <div class="sidebar">
    <div class="sidebar-header">
        <h2 class="qnxt-aura">Welcome</h2>
        {% if name %}<span class="sidebar-emp-name">{{ name }}</span>{% endif %}
    </div>
        <ul class="menu">
            <li>
                <a href="#"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
            </li>
            <li>
                <a href="#"><i class="fas fa-users"></i> Teams</a>
                <ul class="submenu">
                    <li><a href="{% url 'add_member' %}">Add Member</a></li>
                    <li><a href="{% url 'create_team' %}">Create Team</a></li>
                    <li><a href="{% url 'view_edit_teams' %}">Manage Teams</a></li>
                </ul>
            </li>
            <li>
                <a href="#"><i class="fas fa-tasks"></i> Recruitment Tasks</a>
                <ul class="submenu">
                    <li><a href="{% url 'jd_create' %}">Create New JD</a></li>
                    <li><a href="{% url 'view_edit_jds' %}">View/Edit JDs</a></li>
                    <li><a href="{% url 'assign_jd_page' %}">Assign JDs</a></li>
                    <li><a href="{% url 'employee_view_page' %}">Employee View</a></li>
                </ul>
            </li>
            <li>
                <a href="#"><i class="fas fa-file-alt"></i> Manage resume</a>
                <ul class="submenu">
                    <li><a href="{% url 'upload_resume_page' %}">Upload Resume</a></li>
                    <li><a href="{% url 'view_parse_resumes_page' %}?jd_id=1">View/Screen Resumes</a></li>
                </ul>
            </li>
            <li>
                <a href="#"><i class="fas fa-calendar-check"></i> Interview Workflow</a>
                <ul class="submenu">
                    <li><a href="{% url 'schedule_interviews_page' %}">Schedule Interviews</a></li>
                   <li><a href="{% url 'manage_candidate_status' %}">Manage Candidate Status</a></li>
                </ul>
            </li>
            <li>
                <a href="#"><i class="fas fa-user-tie"></i> Candidates</a>
                <ul class="submenu">
                    <li><a href="{% url 'view_finalized_candidates' %}">View Finalized Candidates</a></li>
                    <li><a href="{% url 'candidate_profile' %}">Candidate Profiles</a></li>
                    <li><a href="#">Offer Letter Management</a></li>
                </ul>
            </li>
            <li>
                <a href="#"><i class="fas fa-chart-bar"></i> Reports & Analytics</a>
                <ul class="submenu">
                    <li><a href="#">Team-wise Reports</a></li>
                    <li><a href="#">Task Progress Reports</a></li>
                    <li><a href="#">Candidate Conversion Rates</a></li>
                </ul>
            </li>
            <li>
                <a href="#"><i class="fas fa-cog"></i> Settings</a>
                <ul class="submenu">
                    <li><a href="#">User Profile</a></li>
                    <li><a href="#">Notification Preferences</a></li>
                    <li><a href="#">Access Control & Permissions</a></li>
                    <li><a href="{% url 'create_customer' %}">Create Customer</a></li>
                </ul>
            </li>
            <!-- add a logout menu item-->
            <li>
                <a href="{% url 'logout' %}"><i class="fas fa-sign-out-alt"></i> Logout</a>
            </li>

        </ul>
    </div>
    <!-- ats_tracker/templates/home.html -->
    <div class="main-content">
        <div class="qnxt-header-gradient">
            <h1>QuantumNxt</h1>
        </div>
        <div class="qnxt-body">
            {% block content %}
            {% load static %}
            <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
            <div class="dashboard-container">

                <div class="dashboard-shortcuts">
                    <button class="shortcut-btn" onclick="location.href='{% url 'add_member' %}'">
                        <i class="fas fa-user-plus"></i> Add Member
                    </button>
                    <button class="shortcut-btn" onclick="location.href='{% url 'create_team' %}'">
                        <i class="fas fa-users-cog"></i> Create Team
                    </button>
                    <button class="shortcut-btn" onclick="location.href='{% url 'jd_create' %}'">
                        <i class="fas fa-file-medical"></i> Create JD
                    </button>
                    <button class="shortcut-btn" onclick="location.href='{% url 'assign_jd_page' %}'">
                        <i class="fas fa-tasks"></i> Assign JD
                    </button>
                    <button class="shortcut-btn" onclick="location.href='{% url 'upload_resume_page' %}'">
                        <i class="fas fa-file-upload"></i> Upload Resume
                    </button>
                </div>
                <div class="dashboard-sections">
                    <div class="dashboard-left">
                        <div class="dashboard-card">
                            <h3>Pending/Active Recruitment JDs</h3>
                            <table class="dashboard-table" id="pending-jds-table">
                                <thead>
                                    <tr>
                                        <th>JD ID</th>
                                        <th>Summary</th>
                                        <th>Customer</th>
                                        <th>Status</th>
                                        <th>Created At</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Filled by JS -->
                                </tbody>
                            </table>
                        </div>
                        <div class="dashboard-card">
                            <h3>Monthly Closed JDs & Candidates</h3>
                            <table class="dashboard-table" id="monthly-report-table">
                                <thead>
                                    <tr>
                                        <th>Month</th>
                                        <th>Closed JDs</th>
                                        <th>Candidates</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Filled by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="dashboard-right">
                        <div class="dashboard-card">
                            <h3>Active JDs by Customer</h3>
                            <canvas id="customerPieChart"></canvas>
                        </div>
                        <div class="dashboard-card">
                            <h3>Closed JDs (Last 6 Months)</h3>
                            <canvas id="closedJDsBarChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
            <script src="{% static 'js/dashboard.js' %}"></script>
            {% endblock %}
        </div>
    </div>
    <script src="{% static 'js/home.js' %}"></script>
</body>
</html>