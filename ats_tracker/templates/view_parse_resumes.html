{% extends "home.html" %}
{% load static %}
{% block title %}View/Parse Resume{% endblock %}
{% block content %}
<link rel="stylesheet" href="{% static 'css/view_parse_resumes.css' %}">
<div class="glass-card">
    <h1 class="page-title">View/Parse Resume</h1>
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <h2>
            Resumes for JD:
            <select id="jd-select"></select>
            <span id="jd-id"></span>
        </h2>
        <button id="start-parse-btn" class="icon-btn" title="Start Parsing">
            &#128269; Start Parsing
        </button>
        <button id="export-btn" class="icon-btn export-btn" title="Export to Excel">
            &#x1F4C3; Export
        </button>
    </div>
    <table id="resume-table" class="resume-table">
        <thead>
            <tr>
                <th class="file-name-col" style="width:180px;">File Name</th>
                <th style="width:160px;">Name</th>
                <th style="width:120px;">Contact No</th>
                <th style="width:180px;">Email</th>
                <th style="width:80px;">Tot. Exp (years)</th>
                <th style="width:90px;">Status</th>
                <th style="width:160px;">Actions</th>
            </tr>
        </thead>
        <tbody id="resumes-tbody"></tbody>
    </table>
</div>

<!-- Candidate Modal Overlay -->
<div id="candidate-modal" class="modal-overlay">
    <div class="modal-content">
        <h3>Record Candidate Details</h3>
        <form id="candidate-form">
            <input type="hidden" id="modal-resume-id">
            <input type="hidden" id="modal-jd-id">
            <input type="hidden" id="modal-team-id">

            <!-- Name, Phone, Email -->
            <div class="modal-row">
                <div style="flex:1; display:flex; flex-direction:column; margin-right:12px;">
                    <label for="modal-name">Name:</label>
                    <input type="text" id="modal-name" maxlength="100">
                </div>
                <div style="flex:1; display:flex; flex-direction:column; margin-right:12px;">
                    <label for="modal-phone">Phone:</label>
                    <input type="text" id="modal-phone" maxlength="20">
                </div>
                <div style="flex:1; display:flex; flex-direction:column;">
                    <label for="modal-email">Email:</label>
                    <input type="email" id="modal-email" maxlength="100">
                </div>
            </div>

            <!-- Skills, Education, Experience, Previous Job profile  -->
            <div class="modal-row">
                <div style="flex:1; display:flex; flex-direction:column; margin-right:12px;">
                    <label for="modal-skills">Skills:</label>
                    <input type="text" id="modal-skills" maxlength="255">
                </div>

                <div style="flex:1; display:flex; flex-direction:column; margin-right:12px;">
                    <label for="modal-education">Education:</label>
                    <input type="text" id="modal-education" maxlength="255">
                </div>

                <div style="flex:1; display:flex; flex-direction:column; margin-right:12px;">
                    <label for="modal-experience">Experience (years):</label>
                    <input type="number" id="modal-experience" min="0" step="0.1" maxlength="20" oninput="this.value = this.value.replace(/[^\d.]/g, '')">
                </div>
                <div style="flex:1; display:flex; flex-direction:column; margin-right:12px;">
                    <label for="modal-prev-job-profile">Previous Job Profile:</label>
                    <input type="text" id="modal-prev-job-profile" maxlength="255">
                </div>
            </div>

            <!-- Current CTC, Expected CTC, Notice Period, Job location -->
           <div class="modal-row">
                <div style="flex:1; display:flex; flex-direction:column; margin-right:12px;">
                    <label for="modal-current-ctc">Current CTC:</label>
                    <input type="number" id="modal-current-ctc" min="0" step="0.01" maxlength="20" oninput="this.value = this.value.replace(/[^\d.]/g, '')">
                </div>
                <div style="flex:1; display:flex; flex-direction:column; margin-right:12px;">
                    <label for="modal-expected-ctc">Expected CTC:</label>
                    <input type="number" id="modal-expected-ctc" min="0" step="0.01" maxlength="20" oninput="this.value = this.value.replace(/[^\d.]/g, '')">
                </div>
                <div style="flex:1; display:flex; flex-direction:column; margin-right:12px;">
                    <label for="modal-notice-period">Notice Period (days):</label>
                    <input type="number" id="modal-notice-period" min="0" step="1" maxlength="3" oninput="this.value = this.value.replace(/[^\d]/g, '')">
                </div>
                <div style="flex:1; display:flex; flex-direction:column;">
                    <label for="modal-location">Location:</label>
                    <input type="text" id="modal-location" maxlength="100">
                </div>
            </div>


            <!-- Screen Status, Screening Team, HR Member ID -->
            <div class="modal-row">
                <div style="flex:1; display:flex; flex-direction:column; margin-right:12px;">
                    <label for="modal-screen-status">Screen Status:</label>
                    <select id="modal-screen-status">
                        <option value="toBeScreened">To Be Screened</option>
                        <option value="selected">Selected</option>
                        <option value="rejected">Rejected</option>
                        <option value="onHold">On Hold</option>
                    </select>
                </div>
                <!-- Screening Team (readonly, auto-filled) -->
                <div style="flex:1; display:flex; flex-direction:column; margin-right:12px;">
                    <label for="modal-screening-team">Screening Team:</label>
                    <input type="text" id="modal-screening-team" readonly>
                </div>

                <!-- Assigned To (HR Member dropdown) -->
                <div style="flex:1; display:flex; flex-direction:column;">
                    <label for="modal-hr-member-id">Assigned To:</label>
                    <select id="modal-hr-member-id"></select>
                </div>
            </div>

            <div class="modal-row">
                <div style="flex:1; display:flex; flex-direction:column;">
                    <label for="modal-screened-on">Screened On:</label>
                    <input type="date" id="modal-screened-on">
                </div>
                <div style="flex:1; display:flex; flex-direction:column;">
                    <label for="modal-shared-on">Shared On:</label>
                    <input type="date" id="modal-shared-on">
                </div>
            </div>

            <!-- Screened Remarks -->
            <div class="modal-row">
                <div style="flex:3; display:flex; flex-direction:column;">
                    <label for="modal-screened-remarks">Screened Remarks:</label>
                    <textarea id="modal-screened-remarks" maxlength="500"></textarea>
                </div>
            </div>

            <!-- Recruiter Comments -->
            <div class="modal-row">
                <div style="flex:3; display:flex; flex-direction:column;">
                    <label for="modal-recruiter-comments">Recruiter Comments:</label>
                    <textarea id="modal-recruiter-comments" maxlength="200"></textarea>
                </div>
            </div>

            <div class="modal-actions">
                <button type="button" id="modal-save-btn" class="modal-btn save-btn">Save</button>
                <button type="button" id="modal-close-btn" class="modal-btn close-btn">Close</button>
            </div>
        </form>
    </div>
</div>
<script src="{% static 'js/view_parse_resumes.js' %}"></script>
<script>
</script>
{% endblock %}