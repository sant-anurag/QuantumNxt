{% extends "home.html" %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="{% static 'css/status_report.css' %}">
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<div class="glass-card status-report-container">
    <h2 class="sr-title"><i class="fas fa-file-excel"></i> Status Reports</h2>
    <form id="statusReportForm" class="sr-form">
        <label for="reportType">Report Type:</label>
        <select name="report_type" id="reportType" required>
            <option value="daily">Daily</option>
            <option value="weekly">Weekly</option>
            <option value="custom">Custom Duration</option>
        </select>
        <label for="teamSelect">Team:</label>
        <select name="team_id" id="teamSelect" class="searchable-select">
            <option value="all">All Teams</option>
            <!-- options will be filled by JavaScript -->
        </select>
        <label for="memberSelect">Member:</label>
        <select name="member_id" id="memberSelect" class="searchable-select">
            <option value="all">All Members</option>
            <!-- options will be filled by JavaScript -->
        </select>
        <label for="dateInput" id="dateLabel">Date:</label>
        <input type="date" name="date" id="dateInput" required>
        <label for="fromDateInput" id="fromLabel" style="display:none;">From:</label>
        <input type="date" name="from_date" id="fromDateInput" style="display:none;">
        <label for="toDateInput" id="toLabel" style="display:none;">To:</label>
        <input type="date" name="to_date" id="toDateInput" style="display:none;">
        <button type="submit" class="btn-primary">Generate Report</button>
        <button type="button" id="exportBtn" class="btn-primary" style="margin-left:10px;">Export to Excel</button>
    </form>
    <div id="statusReportMsg" class="sr-msg"></div>
    <div class="sr-table-container">
        <table class="sr-table" id="statusReportTable">
            <thead>
                <tr>
                    <th>Sr.No</th>
                    <th>Company Name</th>
                    <th>JD Summary</th>
                    <th>JD ID</th>
                    <th>Sharing Profile Count</th>
                    <th>Feedback</th>
                </tr>
            </thead>
            <tbody>
                <!-- Filled by JS -->
            </tbody>
        </table>
    </div>
    <!-- Candidate tables will be rendered here -->
    <div id="candidateTablesContainer" class="candidate-tables-container"></div>
</div>
<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script src="{% static 'js/candidate_tables.js' %}"></script>
<script src="{% static 'js/status_report.js' %}"></script>
{% endblock %}